var socket=io.connect("http://ec2-52-16-192-128.eu-west-1.compute.amazonaws.com/"),app=app||{};$(function(){function identify(){socket.emit("identified",{name:$identityInput.val()},function(){$identificationPanel.addClass("hidden"),$chat.removeClass("hidden")})}var $blastField=$("#blast"),$allPostsTextArea=$("#allPosts"),$clearAllPosts=$("#clearAllPosts"),$sendBlastButton=$("#send"),$lastConnected=$("#last-connected"),$chat=$("#chat"),$identificationPanel=$("#identification-panel"),$identityInput=$("#identity"),$identityButton=$("#identity-button");$identityButton.on("click",identify),$identityInput.keydown(function(e){13==e.keyCode&&$identityButton.trigger("click")}),socket.on("new-identified",function(data){var date=new Date(data.timestamp);$lastConnected.html("Last identified: "+data.name+" at "+date.getHours()+":"+date.getMinutes()+":"+date.getSeconds())}),socket.on("blast",function(data){var copy=$allPostsTextArea.html();$allPostsTextArea.html("<p>"+copy+data.msg+"</p>"),$allPostsTextArea.scrollTop($allPostsTextArea[0].scrollHeight-$allPostsTextArea.height())}),$clearAllPosts.click(function(e){$allPostsTextArea.text("")}),$sendBlastButton.click(function(e){var blast=$blastField.val();blast.length&&socket.emit("blast",{msg:blast},function(data){$blastField.val("")})}),$blastField.keydown(function(e){13==e.keyCode&&$sendBlastButton.trigger("click")})});